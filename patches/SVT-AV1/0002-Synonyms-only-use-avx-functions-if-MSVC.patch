From 59002c69dba18bf139698dfd8f518804ae338b5d Mon Sep 17 00:00:00 2001
From: Christopher Degawa <ccom@randomderp.com>
Date: Fri, 21 Jun 2019 23:33:26 -0500
Subject: [PATCH] Synonyms: only use avx functions if MSVC

Signed-off-by: Christopher Degawa <ccom@randomderp.com>
---
 Source/Lib/Common/ASM_SSE2/synonyms.h | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/Source/Lib/Common/ASM_SSE2/synonyms.h b/Source/Lib/Common/ASM_SSE2/synonyms.h
index 2e938329..cfe44209 100644
--- a/Source/Lib/Common/ASM_SSE2/synonyms.h
+++ b/Source/Lib/Common/ASM_SSE2/synonyms.h
@@ -113,8 +113,7 @@ static INLINE __m128i xx_roundn_epi16(__m128i v_val_d, int32_t bits) {
 // d: int16_t,
 // indx: imm8 (0 - 15)
 //#if _MSC_VER <= 1900
-#ifdef _WIN32
-#if _MSC_VER < 1910
+#if defined(_MSC_VER) && _MSC_VER < 1910
 #define _mm256_insert_epi16(a, d, indx)                                      \
   _mm256_insertf128_si256(                                                   \
       a,                                                                     \
@@ -135,6 +134,5 @@ static INLINE __m256i _mm256_insert_epi32(__m256i a, int32_t b, const int32_t i)
     return c;
 }
 #endif
-#endif
 
 #endif  // AOM_DSP_X86_SYNONYMS_H_
-- 
2.21.0

